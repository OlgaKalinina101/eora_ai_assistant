# üß† –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç EORA

–ü—Ä–æ—Ç–æ—Ç–∏–ø —Å–∏—Å—Ç–µ–º—ã —Å retrieval-augmented generation (RAG) –Ω–∞ –±–∞–∑–µ LangGraph –∏ OpenAI –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–Ω—ã—Ö –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º –∫–æ–º–ø–∞–Ω–∏–∏ EORA, –∏—Å–ø–æ–ª—å–∑—É—è –∫–µ–π—Å—ã –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å —Å–∞–π—Ç–∞ eora.ru.

## üìù –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–µ–π—Å—ã –∏ –∫–æ–Ω—Ç–µ–Ω—Ç —Å–∞–π—Ç–∞ eora.ru. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –≤–∫–ª—é—á–∞–µ—Ç:

- –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –∫–µ–π—Å–æ–≤.
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ [1], [2], –∫–∞–∫ –≤ PDF.

## ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è

–ü—Ä–æ—Ç–æ—Ç–∏–ø —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —É—Å—Ç–æ–π—á–∏–≤—ã–π –ø–∞–π–ø–ª–∞–π–Ω –Ω–∞ –±–∞–∑–µ LangGraph, –≤–∫–ª—é—á–∞—é—â–∏–π:

- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL-–∞–¥—Ä–µ—Å–æ–≤ –∏–∑ PDF –∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏—Ö –ø–∞—Ä—Å–∏–Ω–≥–æ–º —Å–∞–π—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Playwright.
- –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π —Å –ø–æ–º–æ—â—å—é ChromaDB –∏ SentenceTransformers –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—é —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TF-IDF –¥–ª—è –≤—ã–±–æ—Ä–∞ top-k —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤.
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏, –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã—Ö –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
EORA_AI_assistant_rag/
‚îú‚îÄ‚îÄ api/                        # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ endpoints.py            # –ú–∞—Ä—à—Ä—É—Ç—ã FastAPI
‚îú‚îÄ‚îÄ data/                       # –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ eora_cases.json         # –î–∞–Ω–Ω—ã–µ –∫–µ–π—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ raw/                    # –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ       ‚îî‚îÄ‚îÄ –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ EORA –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫.pdf
‚îú‚îÄ‚îÄ data_extraction/            # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ dataset_builder.py      # –ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ HTML
‚îÇ   ‚îú‚îÄ‚îÄ pdf_extractor.py        # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL –∏–∑ PDF
‚îÇ   ‚îî‚îÄ‚îÄ web_processor.py        # WebTextProcessor –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ data_ingestion/             # –ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ ingestor.py             # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îÇ   ‚îî‚îÄ‚îÄ loader.py               # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö 
‚îú‚îÄ‚îÄ rag/                        # –ü–∞–π–ø–ª–∞–π–Ω RAG
‚îÇ   ‚îî‚îÄ‚îÄ pipeline/               # –õ–æ–≥–∏–∫–∞ LangGraph
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ graph.py            # –°–±–æ—Ä–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ LangGraph
‚îÇ       ‚îú‚îÄ‚îÄ chunk_selector.py   # –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –≤ Chroma
‚îÇ       ‚îú‚îÄ‚îÄ nodes.py            # –£–∑–ª—ã LangGraph
‚îÇ       ‚îî‚îÄ‚îÄ types.py            # –¢–∏–ø—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ openai_client.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ OpenAI
‚îú‚îÄ‚îÄ utils/                      # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ logger.py               # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ chroma_client.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ ChromaDB
‚îú‚îÄ‚îÄ vector_store/               # –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ settings.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π, –ë–î –∏ –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ main.py                     # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .env                        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
```

## ‚öôÔ∏è –ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

–§—É–Ω–∫—Ü–∏—è `build_cases_dataset` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL**: –ò–∑–≤–ª–µ–∫–∞–µ—Ç URL-–∞–¥—Ä–µ—Å–∞ –∏–∑ PDF —Å –ø–æ–º–æ—â—å—é `extract_urls_from_pdf`.
2. **–ü–∞—Ä—Å–∏–Ω–≥ –∏ –æ—á–∏—Å—Ç–∫–∞**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ URL:
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —É–¥–∞–ª—è—é—Ç—Å—è –Ω–µ–Ω—É–∂–Ω—ã–µ —Ç–µ–≥–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∫—Ä–∏–ø—Ç—ã, —Å—Ç–∏–ª–∏) —Å –ø–æ–º–æ—â—å—é `WebTextProcessor`.
   - –û—á–∏—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `'\n'.join(...)` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏.
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**: –ò—Ç–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ JSON-—Ñ–∞–π–ª (`eora_cases.json`) —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π UTF-8.

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `build_cases_dataset` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `asyncio` –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ Playwright –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ URL, —Å–æ–∫—Ä–∞—â–∞—è –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `memory_profiler` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `functools.lru_cache`) –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å `pytest` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏.

## üõ†Ô∏è –ö–ª–∞—Å—Å WebTextProcessor

–ö–ª–∞—Å—Å `WebTextProcessor` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –æ—á–∏—Å—Ç–∫—É –≤–µ–±-–∫–æ–Ω—Ç–µ–Ω—Ç–∞. –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```python
processor = WebTextProcessor()
urls = extract_urls_from_pdf(pdf_path)
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –°–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä `WebTextProcessor` —Å –Ω–∞–±–æ—Ä–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤.
- **–û–±—Ä–∞–±–æ—Ç–∫–∞**: –ú–µ—Ç–æ–¥ `process_url` –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç `extract_text`, `clean_html` –∏ `clean_text`.
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `page.evaluate` –∏–∑ Playwright –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ç–µ–≥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `<script>`, `<style>`, `<noscript>`) –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –≤ Python, –∏ —É—Å—Ç—Ä–∞–Ω—è—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ BeautifulSoup.
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏**: –ú–µ—Ç–æ–¥—ã `clean_html_text` –∏ `clean_text_block` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã, –∏–∑–±–µ–≥–∞—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤. –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å—Ç—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `'\n'.join(...)`.
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –æ–±—ä–µ–∫—Ç–æ–≤.

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Playwright**: –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `async_playwright` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ URL.
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã —Å `pytest` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ URL, HTML –∏ —Ç–µ–∫—Å—Ç–∞.
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å `functools.lru_cache` –≤ `process_url` –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ URL.

### –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç URL –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è.

## üìö –ü–∞–π–ø–ª–∞–π–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

–ü–∞–π–ø–ª–∞–π–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –∫–µ–π—Å–æ–≤ –≤ ChromaDB –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.

### –®–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```python
builder = KnowledgeBaseBuilder()
builder.ingest()
```

### –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- **–ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –º–æ–¥–µ–ª—å**: `sberbank-ai/sbert_large_nlu_ru`
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–µ–ª–æ–≤—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏**:

  | –ú–æ–¥–µ–ª—å                        | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞                                         | –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏                     |
  |-------------------------------|------------------------------------------------------|--------------------------------|
  | multi-qa-mpnet-base-dot-v1    | –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è Q&A, —Ö–æ—Ä–æ—à–∞ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏       |
  | BAAI/bge-small-en             | –ë–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏                           | –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏    |
  | intfloat/e5-small-v2          | –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è open-domain retrieval                   | –¢—Ä–µ–±—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∞ query/passage  |
  | text-embedding-3-small        | –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤                         | –ü–ª–∞—Ç–Ω–∞—è, —Ç—Ä–µ–±—É–µ—Ç API           |

### üìê –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ CHUNK_SIZE –∏ CHUNK_OVERLAP  
–î–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ LLM-–º–æ–¥–µ–ª—å—é –±—ã–ª–æ –≤—ã–±—Ä–∞–Ω–æ:  

```python
CHUNK_SIZE = 150
CHUNK_OVERLAP = 30
```

–ü–æ—á–µ–º—É —Ç–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è?

CHUNK_SIZE = 150 ‚Äî —Ç–µ–∫—Å—Ç—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –∫–µ–π—Å–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, https://eora.ru/cases/skazki-dlya-gugl-assistenta), –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –ø–ª–æ—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã —Å –ø–µ—Ä–µ–º–µ–∂–∞—é—â–∏–º–∏—Å—è —Ñ–∞–∫—Ç–∞–º–∏, —Ä–µ—à–µ–Ω–∏—è–º–∏ –∏ –¥–µ—Ç–∞–ª—è–º–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤. –†–∞–∑–º–µ—Ä 150 —Ç–æ–∫–µ–Ω–æ–≤ (–ø—Ä–∏–º–µ—Ä–Ω–æ 100‚Äì120 —Å–ª–æ–≤) –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ü–µ–ª—å–Ω—ã–π —Å–º—ã—Å–ª–æ–≤–æ–π –±–ª–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–∏—Å–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —ç—Ç–∞–ø–∞ –ø—Ä–æ–µ–∫—Ç–∞), –Ω–µ –¥—Ä–æ–±—è –µ–≥–æ —Å–ª–∏—à–∫–æ–º –º–µ–ª–∫–æ. –≠—Ç–æ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ LLM –º–æ–≥–ª–∞ –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ —Å–≤—è–∑–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—Ä—ã–≤–∫–∏.

CHUNK_OVERLAP = 30 ‚Äî –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ –≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ —Å—Ç—ã–∫ –¥–≤—É—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤. –¢–∞–∫–æ–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ (~20% –æ—Ç –¥–ª–∏–Ω—ã —á–∞–Ω–∫–∞) –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Ç–µ—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

–í—ã–≤–æ–¥:
–¢–∞–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —á–∞–Ω–∫–∏–Ω–≥–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤, –ø–æ–≤—ã—à–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ —É–ª—É—á—à–∞–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ —É—Å–ª–æ–≤–∏—è—Ö –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –∫–∞–∫ –≤ –∑–∞–¥–∞–Ω–∏–∏ EORA.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞

| –≠—Ç–∞–ø                         | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                   |
|------------------------------|----------------------------------------------------------------------------------------------------------------------------|
| **1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**       | –ß—Ç–µ–Ω–∏–µ –∫–µ–π—Å–æ–≤ –∏–∑ `eora_cases.json` –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{link: text}`, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ `llama_index.Document`. |
| **2. –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏**    | –î–µ–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å–º—ã—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏ —Å –ø–æ–º–æ—â—å—é `SentenceSplitter` —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ `chunk_size` –∏ `chunk_overlap`.        |
| **3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤** | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `SentenceTransformer` (`sberbank-ai/sbert_large_nlu_ru`) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ —á–∞–Ω–∫–æ–≤.                    |
| **4. –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**    | –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞–Ω–∫–æ–≤ –ø–∞–∫–µ—Ç–∞–º–∏ –ø–æ 100 –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ CPU –∏ –ø–∞–º—è—Ç–∏.                                                             |
| **5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ ChromaDB** | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (`source` URL) –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é ChromaDB.                                       |
| **6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏**     | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è RAM —á–µ—Ä–µ–∑ `psutil`.                                                                                |

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: `llama_index.Document` –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏.
- **–†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏**: `SentenceSplitter` –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º.
- **–≠–º–±–µ–¥–¥–∏–Ω–≥–∏**: `sentence-transformers` —Å –º–æ–¥–µ–ª—å—é `sberbank-ai/sbert_large_nlu_ru`.
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: `ChromaDB` –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞.
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: `psutil` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏.
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–∞—Å—Ç–æ–º–Ω—ã–π –ª–æ–≥–≥–µ—Ä –¥–ª—è –∑–∞–ø–∏—Å–∏ —ç—Ç–∞–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏, –æ—à–∏–±–æ–∫ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –ø–∞–∫–µ—Ç–∞–º–∏ –ø–æ 100 –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ CPU –∏ –ø–∞–º—è—Ç—å.
- **–û—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏**: –Ø–≤–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ `del`.
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ Resident Set Size (RSS) –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞ `encode()`.
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (`try/except`) –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –ø–∞–∫–µ—Ç–∞.

## üß† –ü–∞–π–ø–ª–∞–π–Ω LangGraph

–ü–∞–π–ø–ª–∞–π–Ω –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ LangGraph –∏ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP) —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —É–∑–ª—ã:

| –£–∑–µ–ª            | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                      |
|-----------------|-------------------------------------------------|
| `input`         | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥ (`user_input`). |
| `search`        | –ù–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏ –ø–æ —Å–µ–≥–º–µ–Ω—Ç—É.          |
| `prompt`        | –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM.                       |
| `generate`      | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–∏—Å—å–º–æ —á–µ—Ä–µ–∑ `gpt-4o`.               |
| `output`        | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ.                    |

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (`SentenceTransformer`, ChromaDB, `AsyncOpenAI`).
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ.
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏ —Å –ø–æ–º–æ—â—å—é `psutil` –≤ —É–∑–ª–∞—Ö `search` –∏ `generate`.

## üß† –ò–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ –ø—Ä–æ–º–ø—Ç–æ–≤

–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã–±—Ä–∞–Ω–∞ –º–æ–¥–µ–ª—å `gpt-4o` –∑–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω—ã, –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

```python
response = await openai_client.chat.completions.create(
    model="gpt-4o",
    messages=[
        {
            "role": "system",
            "content": "–¢—ã ‚Äî AI-—ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º –∫–æ–º–ø–∞–Ω–∏–∏ EORA.",
        },
        {"role": "user", "content": state["prompt"]},
    ],
    temperature=0.7,
)
```

- **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞**: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ 0.7 –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö, –Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã—Ö –ø–∏—Å–µ–º.
- **–î–∏–∑–∞–π–Ω –ø—Ä–æ–º–ø—Ç–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ RAG, –≤–∫–ª—é—á–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤—ã–¥–µ—Ä–∂–∫–∏ –∏–∑ –∫–µ–π—Å–æ–≤ EORA, —á—Ç–æ–±—ã:
  - –ò—Å–∫–ª—é—á–∏—Ç—å –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.
  - –ü–æ–≤—ã—Å–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å.
  - –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –Ω–æ–≤—ã–º —Å–µ–≥–º–µ–Ω—Ç–∞–º –∏–ª–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º –ø—É—Ç–µ–º –∑–∞–º–µ–Ω—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

## üåê HTTP API

–°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ POST-–∑–∞–ø—Ä–æ—Å –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/ask`.

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞
```json
POST /ask
{
  "question": "–ß—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è —Ä–∏—Ç–µ–π–ª–µ—Ä–æ–≤?"
}
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞
```json
{
  "answer": "–£–≤–∞–∂–∞–µ–º—ã–π(–∞—è) [–ü–æ–ª—É—á–∞—Ç–µ–ª—å],\n\n–î–ª—è —Ä–∏—Ç–µ–π–ª–µ—Ä–æ–≤ –∫–æ–º–ø–∞–Ω–∏—è EORA –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:\n\n1. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ –∏ –±–æ—Ç—ã**: –ú—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—É –¥–ª—è Purina –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –ê–ª–∏—Å–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–≤—ã—Å–∏–ª–∞ –¥–æ–≤–µ—Ä–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤. –≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å —Ä–∏—Ç–µ–π–ª–µ—Ä–∞–º —É–∫—Ä–µ–ø–∏—Ç—å –ª–æ—è–ª—å–Ω–æ—Å—Ç—å –∫ –±—Ä–µ–Ω–¥—É [1](https://eora.ru/cases/purina-navyk-viktorina).\n\n2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è HR-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤**: –î–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –ú–∞–≥–Ω–∏—Ç –º—ã —Å–æ–∑–¥–∞–ª–∏ HR-–±–æ—Ç–∞, —É–ø—Ä–æ—â–∞—é—â–µ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è, —á—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–π–º–∞ [2](https://eora.ru/cases/chat-boty/hr-bot-dlya-magnit-kotoriy-priglashaet-na-sobesedovanie).\n\n–ú—ã –±—É–¥–µ–º —Ä–∞–¥—ã –æ–±—Å—É–¥–∏—Ç—å –≤–∞—à–∏ –∑–∞–¥–∞—á–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.\n\n–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –æ –¥—Ä—É–≥–∏—Ö –∫–µ–π—Å–∞—Ö, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏!\n\n–° —É–≤–∞–∂–µ–Ω–∏–µ–º,\n[–í–∞—à–µ –∏–º—è]"
}
```

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:
   ```plaintext
   OPENAI_API_KEY=sk-...
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   uvicorn main:app --reload
   ```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
1. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
   ```bash
   docker-compose up --build
   ```
2. –î–æ—Å—Ç—É–ø –∫ API: `http://localhost:8000/ask`.

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
- **–£—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏–µ RAG**:
  - –î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω–æ–Ω–∏–º–∏—á–µ—Å–∫–∏–π –∏–ª–∏ fuzzy-–ø–æ–∏—Å–∫ –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤ —Ä—ã–Ω–∫–∞.
  - –°–æ—Ö—Ä–∞–Ω—è—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã —Ä—ã–Ω–∫–∞ –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –Ω–∞ —ç—Ç–∞–ø–µ —á–∞–Ω–∫–∏–Ω–≥–∞.
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**:
  - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ —á–∞–Ω–∫–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤:
    ```python
    from functools import lru_cache
    @lru_cache(maxsize=100)
    def cached_search(segment: str) -> tuple:
        return tuple(find_relevant_chunks_by_segment(segment, collection, embedder))
    ```
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
  - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/ask` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `TestClient`.
- **Guardrails**:
  - –í–Ω–µ–¥—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –æ—Ç–≤–µ—Ç–æ–≤ –º–æ–¥–µ–ª–∏ —Å –ø–æ–º–æ—â—å—é Guardrails –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏, —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é API (–Ω–∞–ø—Ä–∏–º–µ—Ä, JWT –∏–ª–∏ API-–∫–ª—é—á).
